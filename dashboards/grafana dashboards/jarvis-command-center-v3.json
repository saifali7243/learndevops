{
  "title": "JARVIS ‚Äì DevOps War Room v3",
  "timezone": "browser",
  "refresh": "5s",
  "schemaVersion": 38,
  "version": 1,
  "style": "dark",
  "tags": ["jarvis", "devops", "geek"],
  "time": { "from": "now-30m", "to": "now" },

  "templating": {
    "list": [
      {
        "name": "container",
        "type": "query",
        "datasource": "Prometheus",
        "query": "label_values(container_cpu_usage_seconds_total, container)",
        "multi": true,
        "includeAll": true,
        "refresh": 2
      }
    ]
  },

  "panels": [

    {
      "type": "gauge",
      "title": "üî• HERO ‚Äì HOST MEMORY %",
      "gridPos": { "h": 10, "w": 24, "x": 0, "y": 0 },
      "targets": [
        {
          "expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100",
          "instant": true,
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "min": 0,
          "max": 100,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "#00f5ff", "value": null },
              { "color": "#ffaa00", "value": 70 },
              { "color": "#ff0055", "value": 85 }
            ]
          }
        }
      }
    },

    {
      "type": "timeseries",
      "title": "üß† Host Memory Usage (GB)",
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 10 },
      "targets": [
        {
          "expr": "(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / 1024 / 1024 / 1024",
          "legendFormat": "Used Memory",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "gigabytes"
        }
      }
    },

    {
      "type": "gauge",
      "title": "‚ö° HOST CPU %",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 18 },
      "targets": [
        {
          "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
          "instant": true,
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": { "unit": "percent", "min": 0, "max": 100 }
      }
    },

    {
      "type": "timeseries",
      "title": "üíª CPU Per Core %",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 18 },
      "targets": [
        {
          "expr": "100 - (rate(node_cpu_seconds_total{mode=\"idle\"}[5m]) * 100)",
          "legendFormat": "Core {{cpu}}",
          "refId": "A"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" } }
    },

    {
      "type": "stat",
      "title": "‚è± Uptime (Hours)",
      "gridPos": { "h": 6, "w": 6, "x": 0, "y": 26 },
      "targets": [
        {
          "expr": "(time() - node_boot_time_seconds) / 3600",
          "instant": true,
          "refId": "A"
        }
      ]
    },

    {
      "type": "stat",
      "title": "üì¶ Disk Usage %",
      "gridPos": { "h": 6, "w": 6, "x": 6, "y": 26 },
      "targets": [
        {
          "expr": "(1 - (node_filesystem_avail_bytes / node_filesystem_size_bytes)) * 100",
          "instant": true,
          "refId": "A"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" } }
    },

    {
      "type": "timeseries",
      "title": "üê≥ CPU % Per Container",
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 32 },
      "targets": [
        {
          "expr": "sum(rate(container_cpu_usage_seconds_total{container=~\"$container\"}[5m])) by (container) * 100",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "percent" } }
    },

    {
      "type": "timeseries",
      "title": "üê≥ Container Memory Usage (MB)",
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 40 },
      "targets": [
        {
          "expr": "container_memory_usage_bytes{container=~\"$container\"} / 1024 / 1024",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "megabytes" } }
    },

    {
      "type": "stat",
      "title": "üü¢ Running Containers",
      "gridPos": { "h": 6, "w": 6, "x": 0, "y": 48 },
      "targets": [
        {
          "expr": "count(container_last_seen)",
          "instant": true,
          "refId": "A"
        }
      ]
    },

    {
      "type": "stat",
      "title": "üîå TCP Connections",
      "gridPos": { "h": 6, "w": 6, "x": 6, "y": 48 },
      "targets": [
        {
          "expr": "node_netstat_Tcp_CurrEstab",
          "instant": true,
          "refId": "A"
        }
      ]
    },

    {
      "type": "stat",
      "title": "‚öô Processes Running",
      "gridPos": { "h": 6, "w": 6, "x": 12, "y": 48 },
      "targets": [
        {
          "expr": "node_procs_running",
          "instant": true,
          "refId": "A"
        }
      ]
    }

  ]
}