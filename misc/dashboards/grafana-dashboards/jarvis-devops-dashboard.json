{
  "title": "JARVIS ‚Äì DevOps Command Bridge",
  "timezone": "browser",
  "refresh": "5s",
  "schemaVersion": 38,
  "version": 1,
  "style": "dark",
  "tags": ["jarvis", "devops", "neon"],
  "time": { "from": "now-15m", "to": "now" },

  "templating": {
    "list": [
      {
        "name": "container",
        "type": "query",
        "datasource": "Prometheus",
        "query": "label_values(container_cpu_usage_seconds_total, container)",
        "multi": true,
        "includeAll": true,
        "refresh": 2
      }
    ]
  },

  "panels": [

    {
      "type": "gauge",
      "title": "üî• MEMORY USAGE ‚Äì HERO PANEL",
      "gridPos": { "h": 10, "w": 24, "x": 0, "y": 0 },
      "targets": [
        {
          "expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100",
          "instant": true,
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "min": 0,
          "max": 100,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "#00ffcc", "value": null },
              { "color": "#ffaa00", "value": 70 },
              { "color": "#ff0055", "value": 85 }
            ]
          }
        }
      }
    },

    {
      "type": "gauge",
      "title": "‚ö° HOST CPU %",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 10 },
      "targets": [
        {
          "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
          "instant": true,
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "min": 0,
          "max": 100
        }
      }
    },

    {
      "type": "timeseries",
      "title": "üê≥ CPU % Per Container",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 10 },
      "targets": [
        {
          "expr": "sum(rate(container_cpu_usage_seconds_total{container=~\"$container\"}[5m])) by (container) * 100",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent"
        }
      }
    },

    {
      "type": "timeseries",
      "title": "üß† Memory MB Per Container",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 18 },
      "targets": [
        {
          "expr": "container_memory_usage_bytes{container=~\"$container\"} / 1024 / 1024",
          "legendFormat": "{{container}}",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "megabytes"
        }
      }
    },

    {
      "type": "timeseries",
      "title": "üåê Network RX / TX",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 18 },
      "targets": [
        {
          "expr": "rate(node_network_receive_bytes_total[5m])",
          "legendFormat": "RX {{device}}",
          "refId": "A"
        },
        {
          "expr": "rate(node_network_transmit_bytes_total[5m])",
          "legendFormat": "TX {{device}}",
          "refId": "B"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "bytes"
        }
      }
    },

    {
      "type": "stat",
      "title": "üìà App Request Rate",
      "gridPos": { "h": 6, "w": 12, "x": 0, "y": 26 },
      "targets": [
        {
          "expr": "rate(app_requests_total[5m])",
          "instant": true,
          "refId": "A"
        }
      ]
    },

    {
      "type": "stat",
      "title": "üü¢ Running Containers",
      "gridPos": { "h": 6, "w": 12, "x": 12, "y": 26 },
      "targets": [
        {
          "expr": "count(container_last_seen)",
          "instant": true,
          "refId": "A"
        }
      ]
    }

  ]
}